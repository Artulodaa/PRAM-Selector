<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Cabin Announcement Selector - PRAM-System</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
            color: #333;
        }
        h1 {
            text-align: center;
            color: #01579b;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        .container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 20px;
        }
        .section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            width: 45%;
            transition: transform 0.2s;
        }
        .section:hover {
            transform: translateY(-5px);
        }
        .checkbox-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .checkbox-list label {
            display: block;
            margin: 8px 0;
            font-size: 16px;
            color: #424242;
        }
        button {
            padding: 12px 24px;
            background: linear-gradient(45deg, #0288d1, #0277bd);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin-right: 10px;
            font-size: 16px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s;
        }
        button:hover {
            background: linear-gradient(45deg, #0277bd, #01579b);
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        th {
            background: linear-gradient(45deg, #0288d1, #0277bd);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 14px;
        }
        td {
            background: #f9f9f9;
            color: #333;
            font-size: 14px;
        }
        tr:last-child td {
            border-bottom: none;
        }
        tr:hover td {
            background: #e1f5fe;
        }
        p {
            font-size: 16px;
            color: #555;
            text-align: center;
            margin-top: 20px;
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .section {
                width: 100%;
            }
            button {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Cabin Announcement Selector - PRAM-System</h1>
    <div class="container">
        <div class="section">
            <h2>Announcements</h2>
            <div class="checkbox-list" id="announcements">
                <label><input type="checkbox" id="select-all-announcements"> Select All Announcements</label>
                <label><input type="checkbox" name="announcement" value="SAFETY_DEMO"> Safety Demo</label>
                <label><input type="checkbox" name="announcement" value="DISEMBARKATION"> Disembarkation</label>
                <label><input type="checkbox" name="announcement" value="BOARDING_PILOT_MUSIC"> Boarding - Pilot w/ music</label>
                <label><input type="checkbox" name="announcement" value="BOARDING_REM"> Boarding - Rem</label>
                <label><input type="checkbox" name="announcement" value="OTS_OPEN"> OTS Open</label>
                <label><input type="checkbox" name="announcement" value="OTS_CLOSED"> OTS Closed</label>
                <label><input type="checkbox" name="announcement" value="DUTYFREE"> Duty Free</label>
                <label><input type="checkbox" name="announcement" value="GIFTS"> Gifts</label>
                <label><input type="checkbox" name="announcement" value="LANDED_NOT_ON_TIME"> Landed Not On Time</label>
                <label><input type="checkbox" name="announcement" value="LANDED_ON_TIME_BUGLE"> Landed On Time Bugle</label>
                <label><input type="checkbox" name="announcement" value="ONBOARD_SERVICE"> Onboard Service</label>
                <label><input type="checkbox" name="announcement" value="SCRATCHCARDS"> Scratchcards</label>
            </div>

            <h2>Languages</h2>
            <div class="checkbox-list" id="languages">
                <label><input type="checkbox" id="select-all-languages"> Select All Languages</label>
                <label><input type="checkbox" name="language" value="English"> English</label>
                <label><input type="checkbox" name="language" value="Arabic"> Arabic (MSA)</label>
                <label><input type="checkbox" name="language" value="Bulgarian"> Bulgarian</label>
                <label><input type="checkbox" name="language" value="Catalan"> Catalan</label>
                <label><input type="checkbox" name="language" value="Croatian"> Croatian</label>
                <label><input type="checkbox" name="language" value="Czech"> Czech</label>
                <label><input type="checkbox" name="language" value="Danish"> Danish</label>
                <label><input type="checkbox" name="language" value="Dutch"> Dutch</label>
                <label><input type="checkbox" name="language" value="Finnish"> Finnish</label>
                <label><input type="checkbox" name="language" value="French"> French</label>
                <label><input type="checkbox" name="language" value="German"> German</label>
                <label><input type="checkbox" name="language" value="Greek"> Greek</label>
                <label><input type="checkbox" name="language" value="Hungarian"> Hungarian</label>
                <label><input type="checkbox" name="language" value="Italian"> Italian</label>
                <label><input type="checkbox" name="language" value="Latvian"> Latvian</label>
                <label><input type="checkbox" name="language" value="Lithuanian"> Lithuanian</label>
                <label><input type="checkbox" name="language" value="Maltese"> Maltese</label>
                <label><input type="checkbox" name="language" value="Norwegian"> Norwegian</label>
                <label><input type="checkbox" name="language" value="Polish"> Polish</label>
                <label><input type="checkbox" name="language" value="Portuguese"> Portuguese</label>
                <label><input type="checkbox" name="language" value="Romanian"> Romanian</label>
                <label><input type="checkbox" name="language" value="Slovak"> Slovak</label>
                <label><input type="checkbox" name="language" value="Spanish"> Spanish</label>
                <label><input type="checkbox" name="language" value="Swedish"> Swedish</label>
                <label><input type="checkbox" name="language" value="Ukrainian"> Ukrainian</label>
            </div>

            <button onclick="generateTable()">Generate Table</button>
            <button onclick="resetSelections()">Reset All Selections</button>
        </div>

        <div class="section">
            <h2>Results</h2>
            <div id="results">
                <p>Selected announcements: <span id="announcement-count">0</span></p>
                <p>Selected languages: <span id="language-count">0</span></p>
                <p>Total items: <span id="total-items">0</span></p>
                <table id="results-table">
                    <thead id="results-table-head">
                        <tr>
                            <th>Announcement</th>
                            <!-- Las columnas de idiomas se generarán dinámicamente -->
                        </tr>
                    </thead>
                    <tbody id="results-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <p>Settings will be saved automatically</p>

    <script>
        const pramData = {
            "SAFETY_DEMO": { 
                "English": "No. 1 (00:10)", 
                "Italian": "No. 101 (00:12)", 
                "Spanish": "No. 201 (00:15)", 
                "French": "No. 301 (00:14)", 
                "German": "No. 401 (00:13)" 
            },
            "DISEMBARKATION": { 
                "English": "No. 2 (00:20)", 
                "Italian": "No. 102 (00:22)", 
                "Spanish": "No. 202 (00:25)", 
                "French": "No. 302 (00:23)", 
                "German": "No. 402 (00:21)" 
            },
            "BOARDING_PILOT_MUSIC": { 
                "English": "No. 3 (00:30)", 
                "Italian": "No. 103 (00:32)", 
                "Spanish": "No. 203 (00:35)", 
                "French": "No. 303 (00:33)", 
                "German": "No. 403 (00:31)" 
            },
            "BOARDING_REM": { 
                "English": "No. 4 (00:25)", 
                "Italian": "No. 104 (00:27)", 
                "Spanish": "No. 204 (00:30)", 
                "French": "No. 304 (00:28)", 
                "German": "No. 404 (00:26)" 
            },
            "OTS_OPEN": { 
                "English": "No. 49 (00:28)", 
                "Italian": "No. 251 (00:39)", 
                "Spanish": "No. 385 (00:42)", 
                "French": "No. 501 (00:40)", 
                "German": "No. 601 (00:38)" 
            },
            "OTS_CLOSED": { 
                "English": "No. 50 (00:15)", 
                "Italian": "No. 252 (00:22)", 
                "Spanish": "No. 386 (00:22)", 
                "French": "No. 502 (00:20)", 
                "German": "No. 602 (00:18)" 
            },
            "DUTYFREE": { 
                "English": "No. 51 (00:40)", 
                "Italian": "No. 253 (00:45)", 
                "Spanish": "No. 387 (00:50)", 
                "French": "No. 503 (00:48)", 
                "German": "No. 603 (00:46)" 
            },
            "GIFTS": { 
                "English": "No. 52 (00:18)", 
                "Italian": "No. 254 (00:27)", 
                "Spanish": "No. 388 (00:31)", 
                "French": "No. 504 (00:29)", 
                "German": "No. 604 (00:25)" 
            },
            "LANDED_NOT_ON_TIME": { 
                "English": "No. 53 (00:35)", 
                "Italian": "No. 255 (00:40)", 
                "Spanish": "No. 389 (00:45)", 
                "French": "No. 505 (00:43)", 
                "German": "No. 605 (00:41)" 
            },
            "LANDED_ON_TIME_BUGLE": { 
                "English": "No. 54 (00:20)", 
                "Italian": "No. 256 (00:25)", 
                "Spanish": "No. 390 (00:30)", 
                "French": "No. 506 (00:28)", 
                "German": "No. 606 (00:26)" 
            },
            "ONBOARD_SERVICE": { 
                "English": "No. 55 (00:30)", 
                "Italian": "No. 257 (00:37)", 
                "Spanish": "No. 391 (00:41)", 
                "French": "No. 507 (00:39)", 
                "German": "No. 607 (00:37)" 
            },
            "SCRATCHCARDS": { 
                "English": "No. 56 (00:15)", 
                "Italian": "No. 258 (00:20)", 
                "Spanish": "No. 392 (00:25)", 
                "French": "No. 508 (00:23)", 
                "German": "No. 608 (00:21)" 
            }
        };

        document.getElementById('select-all-announcements').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('input[name="announcement"]');
            checkboxes.forEach(checkbox => checkbox.checked = this.checked);
            updateCounts();
        });

        document.getElementById('select-all-languages').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('input[name="language"]');
            checkboxes.forEach(checkbox => checkbox.checked = this.checked);
            updateCounts();
        });

        function updateCounts() {
            const selectedAnnouncements = document.querySelectorAll('input[name="announcement"]:checked').length;
            const selectedLanguages = document.querySelectorAll('input[name="language"]:checked').length;
            document.getElementById('announcement-count').textContent = selectedAnnouncements;
            document.getElementById('language-count').textContent = selectedLanguages;
            document.getElementById('total-items').textContent = selectedAnnouncements * selectedLanguages;
        }

        function generateTable() {
            const selectedAnnouncements = Array.from(document.querySelectorAll('input[name="announcement"]:checked')).map(input => input.value);
            const selectedLanguages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(input => input.value);
            const thead = document.getElementById('results-table-head');
            const tbody = document.getElementById('results-table-body');

            // Reiniciar la tabla
            thead.innerHTML = '<tr><th>Announcement</th></tr>';
            tbody.innerHTML = '';

            // Determinar los idiomas a mostrar
            let languagesToShow = [];
            if (selectedLanguages.length === 0) {
                languagesToShow = ['English']; // Por defecto, solo inglés si no se selecciona nada
            } else {
                // Asegurarse de que el inglés esté siempre presente, y añadir los idiomas seleccionados
                languagesToShow = ['English'];
                selectedLanguages.forEach(lang => {
                    if (lang !== 'English' && !languagesToShow.includes(lang)) {
                        languagesToShow.push(lang);
                    }
                });
            }

            // Crear las columnas de la tabla
            languagesToShow.forEach(lang => {
                const th = document.createElement('th');
                th.textContent = lang;
                thead.querySelector('tr').appendChild(th);
            });

            // Generar las filas de la tabla
            selectedAnnouncements.forEach(announcement => {
                if (pramData[announcement]) {
                    const row = document.createElement('tr');
                    let cells = `<td>${announcement.replace('_', ' ')}</td>`;
                    languagesToShow.forEach(lang => {
                        cells += `<td>${pramData[announcement][lang] || '-'}</td>`;
                    });
                    row.innerHTML = cells;
                    tbody.appendChild(row);
                }
            });

            updateCounts();
        }

        function resetSelections() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
            document.getElementById('results-table-body').innerHTML = '';
            const thead = document.getElementById('results-table-head');
            thead.innerHTML = '<tr><th>Announcement</th></tr>';
            updateCounts();
        }

        document.querySelectorAll('button, input').forEach(element => {
            element.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            });
        });

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(reg => {
                console.log('Service Worker registered', reg);
            }).catch(err => {
                console.log('Service Worker registration failed', err);
            });
        }

        document.querySelectorAll('input[name="announcement"], input[name="language"]').forEach(checkbox => {
            checkbox.addEventListener('change', updateCounts);
        });
    </script>
</body>
</html>