<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Cabin Announcement Selector - PRAM-System</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
    <link rel="icon" href="icon.png" type="image/png">
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #333;
        }
        h1 {
            text-align: center;
            color: #ffffff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        .container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 20px;
        }
        .section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            width: 45%;
            transition: transform 0.2s;
        }
        .section:hover {
            transform: translateY(-5px);
        }
        .checkbox-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .checkbox-list label {
            display: block;
            margin: 8px 0;
            font-size: 16px;
            color: #424242;
        }
        button {
            padding: 15px 30px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 18px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s;
        }
        button:hover {
            background: linear-gradient(45deg, #e67e22, #d35400);
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        th {
            background: linear-gradient(45deg, #0288d1, #0277bd);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 14px;
        }
        td {
            background: #f9f9f9;
            color: #333;
            font-size: 14px;
        }
        tr:last-child td {
            border-bottom: none;
        }
        tr {
            transition: background 0.3s ease;
        }
        tr:hover td {
            background: #bee3f8;
        }
        p {
            font-size: 16px;
            color: #555;
            text-align: center;
            margin-top: 20px;
        }
        #language-search {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-size: 16px;
            touch-action: manipulation;
            user-select: text;
            -webkit-user-select: text;
            -webkit-appearance: none;
            outline: none;
        }
        #language-search:focus {
            border-color: #0288d1;
            box-shadow: 0 0 5px rgba(2, 136, 209, 0.5);
        }
        #notification {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2ecc71;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .section {
                width: 100%;
                padding: 15px;
                margin-bottom: 20px;
            }
            .checkbox-list {
                padding: 15px;
            }
            button {
                width: calc(100% - 20px);
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Cabin Announcement Selector - PRAM-System</h1>
    <div id="notification"></div>
    <div class="container">
        <div class="section">
            <h2>Announcements</h2>
            <div class="checkbox-list" id="announcements">
                <label><input type="checkbox" id="select-all-announcements"> Select All Announcements</label>
                <label><input type="checkbox" name="announcement" value="BOARDING"> Boarding</label>
                <label><input type="checkbox" name="announcement" value="OTS"> OTS</label>
                <label><input type="checkbox" name="announcement" value="WELCOME_PRE_SAFETY"> Welcome – Pre-Safety</label>
                <label><input type="checkbox" name="announcement" value="SAFETY_DEMO"> Safety Demo</label>
                <label><input type="checkbox" name="announcement" value="ONBOARD_SERVICE"> Onboard Service</label>
                <label><input type="checkbox" name="announcement" value="GIFTS"> Gifts</label>
                <label><input type="checkbox" name="announcement" value="DUTYFREE"> Duty Free</label>
                <label><input type="checkbox" name="announcement" value="SCRATCHCARDS"> Scratchcards</label>
                <label><input type="checkbox" name="announcement" value="TURBULENCE"> Turbulence</label>
                <label><input type="checkbox" name="announcement" value="LANDED_NOT_ON_TIME"> Landed Not On Time</label>
                <label><input type="checkbox" name="announcement" value="LANDED_ON_TIME_BUGLE"> Landed On Time Bugle</label>
                <label><input type="checkbox" name="announcement" value="DISEMBARKATION"> Disembarkation</label>
            </div>

            <h2>Languages</h2>
            <input type="text" id="language-search" placeholder="Search languages...">
            <div class="checkbox-list" id="languages">
                <label><input type="checkbox" id="select-all-languages"> Select All Languages</label>
                <label><input type="checkbox" name="language" value="English"> English</label>
                <label><input type="checkbox" name="language" value="Spanish"> Spanish</label>
                <label><input type="checkbox" name="language" value="Arabic"> Arabic (MSA)</label>
                <label><input type="checkbox" name="language" value="Bulgarian"> Bulgarian</label>
                <label><input type="checkbox" name="language" value="Catalan"> Catalan</label>
                <label><input type="checkbox" name="language" value="Croatian"> Croatian</label>
                <label><input type="checkbox" name="language" value="Czech"> Czech</label>
                <label><input type="checkbox" name="language" value="Danish"> Danish</label>
                <label><input type="checkbox" name="language" value="Dutch"> Dutch</label>
                <label><input type="checkbox" name="language" value="Finnish"> Finnish</label>
                <label><input type="checkbox" name="language" value="French"> French</label>
                <label><input type="checkbox" name="language" value="German"> German</label>
                <label><input type="checkbox" name="language" value="Greek"> Greek</label>
                <label><input type="checkbox" name="language" value="Hungarian"> Hungarian</label>
                <label><input type="checkbox" name="language" value="Italian"> Italian</label>
                <label><input type="checkbox" name="language" value="Latvian"> Latvian</label>
                <label><input type="checkbox" name="language" value="Lithuanian"> Lithuanian</label>
                <label><input type="checkbox" name="language" value="Maltese"> Maltese</label>
                <label><input type="checkbox" name="language" value="Norwegian"> Norwegian</label>
                <label><input type="checkbox" name="language" value="Polish"> Polish</label>
                <label><input type="checkbox" name="language" value="Portuguese"> Portuguese</label>
                <label><input type="checkbox" name="language" value="Romanian"> Romanian</label>
                <label><input type="checkbox" name="language" value="Slovak"> Slovak</label>
                <label><input type="checkbox" name="language" value="Swedish"> Swedish</label>
                <label><input type="checkbox" name="language" value="Ukrainian"> Ukrainian</label>
            </div>

            <button onclick="generateTable()">Generate Table</button>
            <button onclick="resetSelections()">Reset All Selections</button>
        </div>

        <div class="section">
            <h2>Results</h2>
            <div id="results">
                <p>Selected announcements: <span id="announcement-count">0</span></p>
                <p>Selected languages: <span id="language-count">0</span></p>
                <p>Total items: <span id="total-items">0</span></p>
                <table id="results-table">
                    <thead id="resultsTableHead">
                        <tr>
                            <th>Records</th>
                            <!-- Las columnas de idiomas se generan dinámicamente -->
                        </tr>
                    </thead>
                    <tbody id="resultsTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <p>Settings will be saved automatically</p>

    <script>
        const pramData = {
            "SAFETY_DEMO": {
                "English": "No. 1 (00:00)",
                "Arabic": "No. 2 (00:00)",
                "Bulgarian": "No. 3 (00:00)",
                "Croatian": "No. 5 (00:00)",
                "Czech": "No. 6 (00:00)",
                "Danish": "No. 7 (00:00)",
                "Dutch": "No. 8 (00:00)",
                "Finnish": "No. 9 (00:00)",
                "French": "No. 10 (00:00)",
                "German": "No. 11 (00:00)",
                "Greek": "No. 12 (00:00)",
                "Hungarian": "No. 13 (00:00)",
                "Italian": "No. 14 (00:00)",
                "Latvian": "No. 15 (00:00)",
                "Lithuanian": "No. 16 (00:00)",
                "Maltese": "No. 17 (00:00)",
                "Norwegian": "No. 18 (00:00)",
                "Polish": "No. 19 (00:00)",
                "Portuguese": "No. 20 (00:00)",
                "Romanian": "No. 21 (00:00)",
                "Slovak": "No. 22 (00:00)",
                "Spanish": "No. 23 (00:00)",
                "Swedish": "No. 24 (00:00)",
                "Ukrainian": "No. 25 (00:00)"
            },
            "DISEMBARKATION": {
                "English": "No. 26 (00:20)",
                "Arabic": "No. 27 (00:25)",
                "Czech": "No. 31 (00:22)",
                "French": "No. 32 (00:21)",
                "German": "No. 33 (00:19)",
                "Greek": "No. 34 (00:17)",
                "Hungarian": "No. 35 (00:18)",
                "Italian": "No. 36 (00:23)",
                "Latvian": "No. 37 (00:22)",
                "Spanish": "No. 44 (00:18)"
            },
            "BOARDING_PILOT_MUSIC": {
                "English": "No. 46 (00:32)",
                "Arabic": "No. 64 (00:54)",
                "Czech": "No. 128 (00:53)",
                "Dutch": "No. 160 (00:49)",
                "French": "No. 178 (00:42)",
                "Greek": "No. 214 (00:48)",
                "Italian": "No. 248 (00:43)",
                "Norwegian": "No. 314 (00:42)",
                "Portuguese": "No. 348 (00:42)",
                "Spanish": "No. 382 (00:52)",
                "Ukrainian": "No. 416 (00:44)"
            },
            "BOARDING_PILOT": {
                "English": "No. 47 (00:32)",
                "Arabic": "No. 65 (00:53)",
                "Czech": "No. 129 (00:52)",
                "Dutch": "No. 161 (00:48)",
                "French": "No. 179 (00:00)",
                "Greek": "No. 215 (00:47)",
                "Italian": "No. 249 (00:42)",
                "Norwegian": "No. 315 (00:41)",
                "Portuguese": "No. 349 (00:41)",
                "Spanish": "No. 383 (00:51)",
                "Ukrainian": "No. 417 (00:43)"
            },
            "BOARDING_REM_PILOT": {
                "English": "No. 48 (00:28)",
                "Arabic": "No. 66 (00:44)",
                "Czech": "No. 130 (00:36)",
                "Dutch": "No. 162 (00:34)",
                "French": "No. 180 (00:32)",
                "Greek": "No. 216 (00:40)",
                "Italian": "No. 250 (00:36)",
                "Norwegian": "No. 316 (00:32)",
                "Portuguese": "No. 350 (00:34)",
                "Spanish": "No. 384 (00:34)",
                "Ukrainian": "No. 418 (00:36)"
            },
            "OTS_OPEN": {
                "English": "No. 49 (00:28)",
                "Dutch": "No. 163 (00:35)",
                "French": "No. 181 (00:45)",
                "Greek": "No. 217 (00:48)",
                "Italian": "No. 251 (00:39)",
                "Polish": "No. 333 (00:41)",
                "Portuguese": "No. 351 (00:41)",
                "Spanish": "No. 385 (00:42)"
            },
            "OTS_CLOSED": {
                "English": "No. 50 (00:15)",
                "Dutch": "No. 164 (00:18)",
                "French": "No. 182 (00:20)",
                "Greek": "No. 218 (00:24)",
                "Italian": "No. 252 (00:22)",
                "Polish": "No. 334 (00:20)",
                "Portuguese": "No. 352 (00:22)",
                "Spanish": "No. 386 (00:22)"
            },
            "DUTYFREE": {
                "English": "No. 51 (00:17)",
                "Arabic": "No. 67 (00:34)",
                "Croatian": "No. 115 (00:26)",
                "Czech": "No. 131 (00:25)",
                "Dutch": "No. 165 (00:22)",
                "French": "No. 183 (00:19)",
                "Greek": "No. 219 (00:21)",
                "Italian": "No. 253 (00:20)",
                "Norwegian": "No. 317 (00:22)",
                "Polish": "No. 335 (00:20)",
                "Portuguese": "No. 353 (00:19)",
                "Spanish": "No. 387 (00:22)",
                "Ukrainian": "No. 419 (00:19)"
            },
            "GIFTS": {
                "English": "No. 52 (00:18)",
                "Arabic": "No. 68 (00:32)",
                "Croatian": "No. 116 (00:25)",
                "Czech": "No. 132 (00:25)",
                "Dutch": "No. 166 (00:22)",
                "French": "No. 184 (00:17)",
                "Greek": "No. 220 (00:23)",
                "Italian": "No. 254 (00:27)",
                "Norwegian": "No. 318 (00:21)",
                "Polish": "No. 336 (00:21)",
                "Portuguese": "No. 354 (00:28)",
                "Spanish": "No. 388 (00:31)",
                "Ukrainian": "No. 420 (00:22)"
            },
            "LANDED_NOT_ON_TIME": {
                "English": "No. 53 (00:15)",
                "Arabic": "No. 69 (00:26)",
                "Croatian": "No. 117 (00:21)",
                "Czech": "No. 133 (00:21)",
                "Dutch": "No. 167 (00:20)",
                "French": "No. 185 (00:13)",
                "Greek": "No. 221 (00:20)",
                "Italian": "No. 255 (00:26)",
                "Norwegian": "No. 319 (00:17)",
                "Polish": "No. 337 (00:12)",
                "Portuguese": "No. 355 (00:28)",
                "Spanish": "No. 389 (00:23)",
                "Ukrainian": "No. 421 (00:17)"
            },
            "LANDED_ON_TIME_BUGLE": {
                "English": "No. 54 (00:17)",
                "Arabic": "No. 70 (00:25)",
                "Croatian": "No. 118 (00:22)",
                "Czech": "No. 134 (00:22)",
                "Dutch": "No. 168 (00:23)",
                "French": "No. 186 (00:17)",
                "Greek": "No. 222 (00:23)",
                "Italian": "No. 256 (00:19)",
                "Norwegian": "No. 320 (00:20)",
                "Polish": "No. 338 (00:18)",
                "Portuguese": "No. 356 (00:19)",
                "Spanish": "No. 390 (00:17)",
                "Ukrainian": "No. 422 (00:18)"
            },
            "ONBOARD_SERVICE": {
                "English": "No. 55 (00:30)",
                "Arabic": "No. 71 (00:42)",
                "Croatian": "No. 119 (00:31)",
                "Czech": "No. 135 (00:33)",
                "Dutch": "No. 169 (00:29)",
                "French": "No. 187 (00:30)",
                "Greek": "No. 223 (00:31)",
                "Italian": "No. 257 (00:37)",
                "Norwegian": "No. 321 (00:31)",
                "Polish": "No. 339 (00:30)",
                "Portuguese": "No. 357 (00:41)",
                "Spanish": "No. 391 (00:41)",
                "Ukrainian": "No. 423 (00:26)"
            },
            "SCRATCHCARDS": {
                "English": "No. 56 (00:22)",
                "Arabic": "No. 72 (00:30)",
                "Croatian": "No. 120 (00:29)",
                "Czech": "No. 136 (00:25)",
                "Dutch": "No. 170 (00:22)",
                "French": "No. 188 (00:25)",
                "Greek": "No. 224 (00:31)",
                "Italian": "No. 258 (00:23)",
                "Norwegian": "No. 322 (00:24)",
                "Polish": "No. 340 (00:20)",
                "Portuguese": "No. 358 (00:27)",
                "Spanish": "No. 392 (00:25)",
                "Ukrainian": "No. 424 (00:22)"
            },
            "SCRATCHCARDS_IRELAND": {
                "English": "No. 57 (00:17)",
                "Arabic": "No. 73 (00:20)",
                "Croatian": "No. 121 (00:20)",
                "Czech": "No. 137 (00:20)",
                "Dutch": "No. 171 (00:14)",
                "French": "No. 189 (00:16)",
                "Greek": "No. 225 (00:22)",
                "Italian": "No. 259 (00:17)",
                "Norwegian": "No. 323 (00:20)",
                "Polish": "No. 341 (00:19)",
                "Portuguese": "No. 359 (00:22)",
                "Spanish": "No. 393 (00:18)",
                "Ukrainian": "No. 425 (00:13)"
            },
            "SCRATCHCARDS_ITALY": {
                "English": "No. 58 (00:21)",
                "Arabic": "No. 74 (00:31)",
                "Croatian": "No. 122 (00:26)",
                "Czech": "No. 138 (00:28)",
                "Dutch": "No. 172 (00:23)",
                "French": "No. 190 (00:18)",
                "Greek": "No. 226 (00:27)",
                "Italian": "No. 260 (00:27)",
                "Norwegian": "No. 324 (00:25)",
                "Polish": "No. 342 (00:22)",
                "Portuguese": "No. 360 (00:28)",
                "Spanish": "No. 394 (00:25)",
                "Ukrainian": "No. 426 (00:23)"
            },
            "SCRATCHCARDS_PORTUGAL": {
                "English": "No. 59 (00:32)",
                "Arabic": "No. 75 (00:48)",
                "Croatian": "No. 123 (00:44)",
                "Czech": "No. 139 (00:42)",
                "Dutch": "No. 173 (00:36)",
                "French": "No. 191 (00:35)",
                "Greek": "No. 227 (00:42)",
                "Italian": "No. 261 (00:41)",
                "Norwegian": "No. 325 (00:39)",
                "Polish": "No. 343 (00:37)",
                "Portuguese": "No. 361 (00:38)",
                "Spanish": "No. 395 (00:36)",
                "Ukrainian": "No. 427 (00:30)"
            },
            "SCRATCHCARDS_SPAIN": {
                "English": "No. 60 (00:26)",
                "Arabic": "No. 76 (00:34)",
                "Croatian": "No. 124 (00:34)",
                "Czech": "No. 140 (00:29)",
                "Dutch": "No. 174 (00:27)",
                "French": "No. 192 (00:25)",
                "Greek": "No. 228 (00:34)",
                "Italian": "No. 262 (00:35)",
                "Norwegian": "No. 326 (00:33)",
                "Polish": "No. 344 (00:28)",
                "Portuguese": "No. 362 (00:35)",
                "Spanish": "No. 396 (00:30)",
                "Ukrainian": "No. 428 (00:23)"
            },
            "SCRATCHCARDS_UK": {
                "English": "No. 61 (00:29)",
                "Arabic": "No. 77 (00:43)",
                "Croatian": "No. 125 (00:39)",
                "Czech": "No. 141 (00:36)",
                "Dutch": "No. 175 (00:32)",
                "French": "No. 193 (00:31)",
                "Greek": "No. 229 (00:37)",
                "Italian": "No. 263 (00:38)",
                "Norwegian": "No. 327 (00:36)",
                "Polish": "No. 345 (00:32)",
                "Portuguese": "No. 363 (00:36)",
                "Spanish": "No. 397 (00:35)",
                "Ukrainian": "No. 429 (00:24)"
            },
            "TURBULENCE": {
                "English": "No. 62 (00:15)",
                "Arabic": "No. 78 (00:21)",
                "Croatian": "No. 126 (00:18)",
                "Czech": "No. 142 (00:17)",
                "Dutch": "No. 176 (00:15)",
                "French": "No. 194 (00:16)",
                "Greek": "No. 230 (00:18)",
                "Italian": "No. 264 (00:25)",
                "Norwegian": "No. 328 (00:17)",
                "Polish": "No. 346 (00:13)",
                "Portuguese": "No. 364 (00:27)",
                "Spanish": "No. 398 (00:24)",
                "Ukrainian": "No. 430 (00:23)"
            },
            "WELCOME_PRE_SAFETY": {
                "English": "No. 63 (00:28)",
                "Arabic": "No. 79 (00:36)",
                "Croatian": "No. 127 (00:34)",
                "Czech": "No. 143 (00:31)",
                "Dutch": "No. 177 (00:26)",
                "French": "No. 195 (00:30)",
                "Greek": "No. 231 (00:27)",
                "Italian": "No. 265 (00:34)",
                "Norwegian": "No. 329 (00:27)",
                "Polish": "No. 347 (00:27)",
                "Portuguese": "No. 365 (00:39)",
                "Spanish": "No. 399 (00:36)",
                "Ukrainian": "No. 431 (00:24)"
            }
        };

        const announcementGroups = {
            "BOARDING": ["BOARDING_PILOT_MUSIC", "BOARDING_PILOT", "BOARDING_REM_PILOT"],
            "OTS": ["OTS_OPEN", "OTS_CLOSED"],
            "SCRATCHCARDS": ["SCRATCHCARDS", "SCRATCHCARDS_IRELAND", "SCRATCHCARDS_ITALY", "SCRATCHCARDS_PORTUGAL", "SCRATCHCARDS_SPAIN", "SCRATCHCARDS_UK"]
        };

        // Cargar selecciones al iniciar
        document.addEventListener('DOMContentLoaded', () => {
            const savedAnnouncements = JSON.parse(localStorage.getItem('selectedAnnouncements') || '[]');
            const savedLanguages = JSON.parse(localStorage.getItem('selectedLanguages') || '[]');
            document.querySelectorAll('input[name="announcement"]').forEach(cb => {
                cb.checked = savedAnnouncements.includes(cb.value);
            });
            document.querySelectorAll('input[name="language"]').forEach(cb => {
                cb.checked = savedLanguages.includes(cb.value);
            });
            updateCounts();
        });

        document.getElementById('select-all-announcements').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('input[name="announcement"]');
            checkboxes.forEach(checkbox => checkbox.checked = this.checked);
            saveSelections();
            updateCounts();
        });

        document.getElementById('select-all-languages').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('input[name="language"]');
            checkboxes.forEach(checkbox => checkbox.checked = this.checked);
            saveSelections();
            updateCounts();
        });

        document.getElementById('language-search').addEventListener('input', function(e) {
            const search = e.target.value.toLowerCase();
            document.querySelectorAll('#languages label').forEach(label => {
                const lang = label.textContent.toLowerCase();
                label.style.display = lang.includes(search) ? 'block' : 'none';
            });
        });

        document.getElementById('language-search').addEventListener('touchstart', function(e) {
            this.focus();
        });

        function updateCounts() {
            const selectedAnnouncements = document.querySelectorAll('input[name="announcement"]:checked').length;
            const selectedLanguages = document.querySelectorAll('input[name="language"]:checked').length;
            document.getElementById('announcement-count').textContent = selectedAnnouncements;
            document.getElementById('language-count').textContent = selectedLanguages;
            document.getElementById('total-items').textContent = selectedAnnouncements * selectedLanguages;
        }

        function saveSelections() {
            const selectedAnnouncements = Array.from(document.querySelectorAll('input[name="announcement"]:checked')).map(cb => cb.value);
            const selectedLanguages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(cb => cb.value);
            localStorage.setItem('selectedAnnouncements', JSON.stringify(selectedAnnouncements));
            localStorage.setItem('selectedLanguages', JSON.stringify(selectedLanguages));
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => notification.style.display = 'none', 2000);
        }

        function generateTable() {
            const selectedAnnouncements = Array.from(document.querySelectorAll('input[name="announcement"]:checked')).map(input => input.value);
            const selectedLanguages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(input => input.value);
            const thead = document.getElementById('resultsTableHead');
            const tbody = document.getElementById('resultsTableBody');

            // Reiniciar la tabla
            thead.innerHTML = '<tr><th>Records</th></tr>';
            tbody.innerHTML = '';

            // Determinar los idiomas a mostrar
            let languagesToShow = [];
            if (selectedLanguages.length === 0) {
                languagesToShow = ['English'];
            } else {
                languagesToShow = ['English'];
                selectedLanguages.forEach(lang => {
                    if (lang !== 'English' && !languagesToShow.includes(lang)) {
                        languagesToShow.push(lang);
                    }
                });
            }

            // Crear las columnas de la tabla
            languagesToShow.forEach(lang => {
                const th = document.createElement('th');
                th.textContent = lang;
                thead.querySelector('tr').appendChild(th);
            });

            // Generar las filas de la tabla
            const allAnnouncements = [];
            selectedAnnouncements.forEach(announcement => {
                if (announcementGroups[announcement]) {
                    allAnnouncements.push(...announcementGroups[announcement]);
                } else {
                    allAnnouncements.push(announcement);
                }
            });

            allAnnouncements.forEach(announcement => {
                if (pramData[announcement]) {
                    const row = document.createElement('tr');
                    let cells = `<td>${announcement.replace(/_/g, ' ')}</td>`;
                    languagesToShow.forEach(lang => {
                        cells += `<td>${pramData[announcement][lang] || '-'}</td>`;
                    });
                    row.innerHTML = cells;
                    tbody.appendChild(row);
                }
            });

            updateCounts();
            showNotification('Table generated successfully!');
        }

        function resetSelections() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
            document.getElementById('language-search').value = '';
            document.querySelectorAll('#languages label').forEach(label => label.style.display = 'block');
            document.getElementById('resultsTableBody').innerHTML = '';
            const thead = document.getElementById('resultsTableHead');
            thead.innerHTML = '<tr><th>Records</th></tr>';
            localStorage.removeItem('selectedAnnouncements');
            localStorage.removeItem('selectedLanguages');
            updateCounts();
            showNotification('Selections reset!');
        }

        document.querySelectorAll('button, input').forEach(element => {
            element.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            });
        });

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(reg => {
                console.log('Service Worker registered', reg);
            }).catch(err => console.log('Service Worker registration failed', err));
        }

        document.querySelectorAll('input[name="announcement"], input[name="language"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                saveSelections();
                updateCounts();
            });
        });
    </script>
</body>
</html>
